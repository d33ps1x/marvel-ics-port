assert(!less_than_int(1324380119, getprop("ro.build.date.utc")));
assert(getprop("ro.product.device") == "liberty" ||
       getprop("ro.build.product") == "liberty");
show_progress(0.500000, 0);
format("yaffs2", "MTD", "system", "0");
mount("yaffs2", "MTD", "system", "/system");
package_extract_dir("recovery", "/system");
package_extract_dir("system", "/system");
symlink("Roboto-Bold.ttf", "/system/fonts/DroidSans-Bold.ttf");
symlink("Roboto-Regular.ttf", "/system/fonts/DroidSans.ttf");
symlink("mksh", "/system/bin/sh");
symlink("toolbox", "/system/bin/cat", "/system/bin/chmod",
        "/system/bin/chown", "/system/bin/cmp", "/system/bin/date",
        "/system/bin/dd", "/system/bin/df", "/system/bin/dmesg",
        "/system/bin/getevent", "/system/bin/getprop", "/system/bin/hd",
        "/system/bin/id", "/system/bin/ifconfig", "/system/bin/iftop",
        "/system/bin/insmod", "/system/bin/ioctl", "/system/bin/ionice",
        "/system/bin/kill", "/system/bin/ln", "/system/bin/log",
        "/system/bin/ls", "/system/bin/lsmod", "/system/bin/lsof",
        "/system/bin/mkdir", "/system/bin/mount", "/system/bin/mv",
        "/system/bin/nandread", "/system/bin/netstat",
        "/system/bin/newfs_msdos", "/system/bin/notify", "/system/bin/printenv",
        "/system/bin/ps", "/system/bin/r", "/system/bin/reboot",
        "/system/bin/renice", "/system/bin/rm", "/system/bin/rmdir",
        "/system/bin/rmmod", "/system/bin/route", "/system/bin/schedtop",
        "/system/bin/sendevent", "/system/bin/setconsole",
        "/system/bin/setprop", "/system/bin/sleep", "/system/bin/smd",
        "/system/bin/start", "/system/bin/stop", "/system/bin/sync",
        "/system/bin/top", "/system/bin/touch", "/system/bin/umount",
        "/system/bin/uptime", "/system/bin/vmstat", "/system/bin/watchprops",
        "/system/bin/wipe");
retouch_binaries("/system/lib/libicui18n.so", "beb6d5c75ed4338df9209ab748d5856103259151", "/system/lib/libext2_com_err.so", "5dd480483ac847ded72e952ab58a1b3e3546b15d", "/system/lib/liblog.so", "215385faee1e3e6350ad4cf0949796e6b4a94850", "/system/lib/libdiskconfig.so", "dc2295acffd84a31f5d3535927c63b97a3c2e97e", "/system/lib/libandroid.so", "fb43c8335f0d3d2b16d68c71db27c40781329279", "/system/lib/libpixelflinger.so", "95daae9de9b30ac6b028303f6ca3b30b0344d2f7", "/system/lib/libFFTEm.so", "5bc7a86cfb675d2d26654e4096172571eece321e", "/system/lib/libfilterpack_imageproc.so", "8915d0e6b51a97b4c63538a766a1c56e1006d55a", "/system/lib/libstagefright.so", "b4b4e67ff758c9fa5db5a6d73a819c1e52e83d8d", "/system/lib/libstagefright_avc_common.so", "1a0ae05f0e87e93286a70a00037de4e4d7a52a74", "/system/lib/libext4_utils.so", "83e45cfb0606105dad25423b7081e92c053e62e5", "/system/lib/libbcc.so.sha1", "1ceb3742afcd8288c3727e4bc7aaf8b989e176f4", "/system/lib/libssl.so", "0a7d34c56ec33a469952cc230fea903e0e64c500", "/system/lib/libsysutils.so", "5a2ef0ff1ec88afd174549b4f9f939efb4d0df9f", "/system/lib/libjnigraphics.so", "bef4b2d465a3e165c046c0c703eaac5662020bd4", "/system/lib/libbcinfo.so", "c9698a8b78d53e4c8f5a40680f250be172779e2a", "/system/lib/libdbus.so", "944cb7fc2830ae4cbb539ce8261c07615d3c59f2", "/system/lib/libstagefright_soft_mp3dec.so", "da653cceecd1231ad5bf9c0493f50a20cbf2f742", "/system/lib/libvariablespeed.so", "9d4ee16d55a92e35faf76b5f716b89efcc8f6045", "/system/lib/libWnnJpnDic.so", "9d5f81d871ddc568208e1dfbe79ffc476d4e4f06", "/system/lib/libspeexresampler.so", "debc6f97786136bf681ea64ee790ea26d9ba0a3f", "/system/lib/libgabi++.so", "202afb305de0e14af8af8f2a06b1a8719b71acdf", "/system/lib/libz.so", "94ff0142127ff368024fa959be69aebe1bcfb569", "/system/lib/egl/libGLES_android.so", "9da4a996660375b6c09dcb8021bddad3163a225e", "/system/lib/libstagefright_enc_common.so", "c556d8809ac3700e07b417dbc7816510f6800b53", "/system/lib/libthread_db.so", "3a1c98bba796b401d16ee1d92b972a09dd3a23cd", "/system/lib/libOmxCore.so", "483fca5d70bbd260d2d61e5c45f468edb979669a", "/system/lib/libhtc_ril.so", "fce7a8ff7fb5b4dd560e305dbfda60e285484162", "/system/lib/libexif.so", "5c031d68f988f98ea5af5f090119937f7230b075", "/system/lib/libstagefright_soft_mpeg4dec.so", "e9b1a20ccb52e6fd8a13bcf75a7ea063e0ccc6ed", "/system/lib/libext2_blkid.so", "539d04dde4a2500fe8316091860555402366877a", "/system/lib/hw/gps.goldfish.so", "a830efdd4648663fb6e669f2f9908f8124b89ad1", "/system/lib/hw/lights.buzz.so", "cf8cf39187258d270a56dbd8d2d6ffe92a0e38b0", "/system/lib/hw/lights.goldfish.so", "eb9e5173cbab5b98c17bec3c079b81f81c6d51be", "/system/lib/hw/gralloc.default.so", "9188814032cde25960b270eee394eb6fb4f26ae0", "/system/lib/hw/gps.buzz.so", "50bb88dabcb6a35fdebdd7b54c0df4a1017e5d1f", "/system/lib/hw/audio.primary.goldfish.so", "e6f27897a40f1a72547d2627e4769788d1305e54", "/system/lib/hw/audio.primary.default.so", "bdd6195725773a3844764ca37e8ecf94e86e6610", "/system/lib/hw/sensors.buzz.so", "c5ae3029a6418f41ece0550d80393913e492add5", "/system/lib/hw/audio_policy.default.so", "318de7a5b48a472febf76191044852741febb06b", "/system/lib/hw/sensors.goldfish.so", "c6a5e134230dd3ad3f60263c42acf8174db725bc", "/system/lib/hw/camera.goldfish.so", "d58a240fe2d8ea903b7949cc104c0f78c80a61ab", "/system/lib/libharfbuzz.so", "802454da85992b5d6dc3102c8410441d5cd57f71", "/system/lib/libmediaplayerservice.so", "e6268dd53c482d5d0f0a40d70c967693ae192c41", "/system/lib/libgui.so", "25591025122f325cb2cea8552d621b07758a6566", "/system/lib/libinput.so", "502b313b9bf806825e246b7db3ad18f5f7825498", "/system/lib/libGLESv2.so", "8e915e1a48e0e4dba088d9b88a09aa2239ee3747", "/system/lib/libsystem_server.so", "d34774c0e4d28f029444976e9928be83a0880214", "/system/lib/libext2_profile.so", "3b5caf7dfce79f96aebef57acd7e952f7f0c907c", "/system/lib/libiprouteutil.so", "efc05252955668841664ab0e9c349b4d9d6a91ef", "/system/lib/libETC1.so", "6b6eaeb2c056ba5a570b0b14dbe2db1f01281ad0", "/system/lib/libstagefright_soft_vorbisdec.so", "e9c581815c09c1452fe490f7f7b2d11a9b303714", "/system/lib/libdrm1_jni.so", "31c41341ac2363b8913ce354ba0517a1d4c050cc", "/system/lib/libm.so", "f21f3883306b32eae4300e0af9c41b492c1bd031", "/system/lib/libmedia_jni.so", "8d776c484d25f095c4a6161bb59ed09c3a85334b", "/system/lib/libnfc_ndef.so", "3b0210b48ec5949ea3e2e1ccbf7c3cd75661c28e", "/system/lib/libsrec_jni.so", "61feab69ae8b70ba42a00e644e5b2020fbd18fbe", "/system/lib/libemoji.so", "3189df738ac59f6a433f2c23e99b66238d9a87f3", "/system/lib/libvideoeditorplayer.so", "b31d4e40bba3b1dff959c3c447f4d4e7738361f4", "/system/lib/libcutils.so", "ff71f8be2ac4e20811337d72c168c390da750633", "/system/lib/libsensorservice.so", "c1eaa8b85037632e29778557c1c64464790abd5f", "/system/lib/libdrmframework.so", "390c66c4cb0610ba5413ff938b04e7ce0c2a89a3", "/system/lib/libdrmframework_jni.so", "f486b383e9e815908c8ebeea1ea7a0f8f15cbc79", "/system/lib/libdl.so", "3c6279333eef147eb3ced956f72aeb92457ba23d", "/system/lib/libOpenSLES.so", "01e5622813d1dbc33461904a614366cb22338535", "/system/lib/libfilterfw.so", "d9195f7eb6df8c05c941960108f2560da1c42dbb", "/system/lib/libstagefright_soft_aacdec.so", "820d1d9ee6a1364ab754227d562d7a0608478ff3", "/system/lib/libjpeg.so", "3a9492f8e1bb72b02bf2a6dced08de9bcb5af51d", "/system/lib/libpower.so", "179dacdc4f670f333e85fcb8f6ff334a7de77ac4", "/system/lib/libbluedroid.so", "7f57ad165b1bfd864a3fdf2216abf10918d5ee09", "/system/lib/libwebcore.so", "f75c6efd01556f84dda4093ef2c8b24ccdad90af", "/system/lib/libcrypto.so", "16a273639b9b2c253031f4d7db26fdcf9fb84fb6", "/system/lib/libicuuc.so", "85a82c64dc0a442b0095a84c0ec80ab68fd54435", "/system/lib/libreference-ril.so", "d941f0972eb0b31fa521a9a22da7ea4b15fe3b01", "/system/lib/libwilhelm.so", "61bade09f995f4239644e5e82fe1e7e1e062dae1", "/system/lib/libvideoeditor_jni.so", "b9b2cb5057470743b75a36060d6c0aeffb0863f0", "/system/lib/libSR_AudioIn.so", "43d9ca132a90362540f4a2d6b0ad8beecc2bed12", "/system/lib/libglib.so", "414fde8088641c8841f4e81b1c5f6d755cc8e03e", "/system/lib/libc_malloc_debug_qemu.so", "6455832c04a40c0443d1874b52b32a2eb2e3669a", "/system/lib/libbinder.so", "bebec8bd7f19f4a25b42abdd3cccee7bc28f56c2", "/system/lib/libvorbisidec.so", "626731345ec777bec047899b4e741713ed252a1e", "/system/lib/libbtio.so", "7346f98135aaab37535944c5203fc1fdb0bf77a4", "/system/lib/libOpenMAXAL.so", "01bd69fbce74ae605abd209dd2e69188d165e104", "/system/lib/libjni_mosaic.so", "8cf8cc98e6ad609231f6a0733c80d977def732e5", "/system/lib/bluez-plugin/bluetooth-health.so", "8d039874798278255b38a43d9c03b5ea800ceed3", "/system/lib/bluez-plugin/network.so", "b3bd6487c8046a40f5386f488fe5eff542306fb8", "/system/lib/bluez-plugin/audio.so", "897a952972ac17c9e7eb7de5bc7d64063baf8462", "/system/lib/bluez-plugin/input.so", "b5605854c27eedd38aaec5b8548489cbc8ba6d39", "/system/lib/libstagefright_foundation.so", "b413e4be4845835ee20d9eea480c2ed2195af1d8", "/system/lib/libOmxH264Dec.so", "1ed2ba717b92d38c9a3c233a453b6a3d85b37321", "/system/lib/libaudioeq.so", "017dd7e62fd14063c8ed31903eec47e56e53921e", "/system/lib/libttspico.so", "5a26c37c94595d8cc4646ec6423fb96ba54e0244", "/system/lib/libusbhost.so", "039bd50208268a899fe7262c472ec4c94db52323", "/system/lib/libWnnEngDic.so", "ad947c84861289566966d867aae0d2fdd5d28af2", "/system/lib/libstdc++.so", "34ca4a40341cb079c4224bc91417b5ced6ffe15b", "/system/lib/modules/bcm4329.ko", "3b892846e5629cde62b15a607de998f72d09eb80", "/system/lib/liboemcamera.so", "3fb8170d33316391e3b854ccf2cf3e1a721a73c7", "/system/lib/libandroid_servers.so", "31ac1ca219a3cd513cd0fc163308e45720338a9a", "/system/lib/libdvm.so", "c43c02cfcf44a1baf11e9447263c72bc4908009c", "/system/lib/libmedia.so", "74a6aacc83713b41ada29665fd9e25d363221cfb", "/system/lib/libsqlite_jni.so", "ac2533ad191315ea845e55712c890a60c7002b19", "/system/lib/libhtc_acoustic.so", "4ff28200bf5c4fe746c769eb686915d86299405a", "/system/lib/libbcc.so", "5fc528dfb5c8c7ef21aba01a1e6f261c2718c15d", "/system/lib/libclcore.bc", "a1e2610fdc0c2ef151248092fa32be807d1b983d", "/system/lib/libstagefright_soft_vpxdec.so", "a3075983b5263bbb11dc5b891c9d871df1870fc9", "/system/lib/libc_malloc_debug_leak.so", "195a1513894ac0632ce7387c63a41b6c1b0abb7b", "/system/lib/libstagefright_yuv.so", "0bcd58c813ab6205e81751c0a75aa6fb2ec2eedb", "/system/lib/libstagefright_soft_h264dec.so", "8f0e9587aa0031102206738247c735a173a9be86", "/system/lib/libttscompat.so", "229c3a70c5d0a3114f5b11bfb523dfc3889f30f2", "/system/lib/libmm-adspsvc.so", "d76667404df8b72bdffe00fe179de3503f0efd39", "/system/lib/libsqlite.so", "edc6d3394c60c242ffd7e6d225694e1499ec3e7a", "/system/lib/libOmxMpeg4Dec.so", "d0b301f6fb2736d3cda7dda971c7344989743575", "/system/lib/libRS.so", "74355d837360bf9192911512193b4dc48398d516", "/system/lib/libaudioeffect_jni.so", "bfd0ef8d8b83eba159b2cc618be7dc67fb72c90e", "/system/lib/libandroid_runtime.so", "d81359cb807177f8f20032e64edfe397711ef7ae", "/system/lib/libext2_e2p.so", "e8cb3f77a1fe38557ced43c632e83432c1514396", "/system/lib/libbluetooth.so", "8a973305806e69e6544262858d8be9873eed6e2d", "/system/lib/libstagefright_soft_g711dec.so", "d12235f91b9f93be61412a6c2b1ffecc32abb7bb", "/system/lib/libeffects.so", "2c1cad855fc0ae9a99b2e70252afb0313301fb52", "/system/lib/libdefcontainer_jni.so", "1ce69ed9dd953d38cdd3a2f3e274b64fd3bd6aa7", "/system/lib/libgps.so", "5c06b242c21b7bd6ec9d4432c9d11a57425f7a6f", "/system/lib/libnativehelper.so", "221000b67790c2f6aaefccbd442fd849da0c6f59", "/system/lib/soundfx/libaudiopreprocessing.so", "812a72791072093f8911bccf36dbd3649a096ea8", "/system/lib/soundfx/libbundlewrapper.so", "170d04242ea75d8aeebe8d150ade26ecfc6eb918", "/system/lib/soundfx/libreverbwrapper.so", "1c1198822d481f5caf2b5aaa74b0785ee42e5d90", "/system/lib/soundfx/libvisualizer.so", "0fe4aa527aa8511ac4936c02e9196599ea18d15b", "/system/lib/libc.so", "77457407d0151b22515b5c74531a5dfb9902b2f5", "/system/lib/libskia.so", "4d9f678710b1fb901b73416080e96f99a8e3513c", "/system/lib/libsonivox.so", "36a3ffa30d61c0af7270c770e839d25f3d8f3cdb", "/system/lib/libext2_uuid.so", "9ee0367dd6410e00b45f29545ddda1a5e255bb93", "/system/lib/libGLESv1_CM.so", "7ffca3baf7e6da3532d71344d4cab6a03a42b5e5", "/system/lib/libutils.so", "f482f5bff5ad3fb1ac3d6ee974f9cca6b526771e", "/system/lib/librs_jni.so", "2ab42d00bc18c11ada0fe0432189240eb53fad5a", "/system/lib/libbluetoothd.so", "0341c00460002319abc3878478334b7ac8342954", "/system/lib/libstagefright_soft_amrdec.so", "c1034d167abd3714fea762c90db9c95c168cd56a", "/system/lib/librtp_jni.so", "9f5b0a722597500f28cd7b9b09ae9b56664e0596", "/system/lib/libui.so", "dcb1e409d26596f3c40996668b48a7e47e4abaa7", "/system/lib/libhardware.so", "be69c06a5f0de1dad108f954d6788c83224dafc5", "/system/lib/libOmxVidEnc.so", "b7c8a909f308314b10cfe1209c8d4b5f6f51b8eb", "/system/lib/libstagefright_omx.so", "9128469e77bafd03a7a1a88b334af9ae6aa6eb1f", "/system/lib/libpowermanager.so", "df13fa210bb33c4bc7d1e6f74ff50448d844b2cc", "/system/lib/libsoundpool.so", "aee0dba3e4674f2205f995cfbbe0718c67e3ce58", "/system/lib/libjni_latinime.so", "bdb5caeadace3fb5d656c2d8fb82ad217a42aeb5", "/system/lib/libwnndict.so", "2fe8b7a4a5d92490ab1ec5f485504b5796740434", "/system/lib/libctest.so", "340b3002760240b19a2ed3dc40a5b849199e20ab", "/system/lib/libwebrtc_audio_preprocessing.so", "079bdc389b5e7a01be2e88f2ddfaf22086b7db5e", "/system/lib/libcamera_client.so", "cb8e089095e1f6f7b28d517cc71fa1b1873925fc", "/system/lib/libwpa_client.so", "1b4e4173beb562eab2e2fc390ac0b54aabbf6475", "/system/lib/libdrm1.so", "b06166036420aceea7fd13a0c71d2bcefdaeb7f1", "/system/lib/libEGL.so", "5b5e85f12cf33a6a8882253f0582f1fa1349f43a", "/system/lib/libmtp.so", "3c97b7a5322212a6ec68de35cbd997f00e0adbe3", "/system/lib/libsurfaceflinger_client.so", "8661b5af99a4237b155141949dfede0ce0745ca3", "/system/lib/libpagemap.so", "0946f0135d6d2ab6e0ee59e892a199c707b2bd05", "/system/lib/libhardware_legacy.so", "9413bab35f0a8c6102647f4cbd840f5341de328d", "/system/lib/libstlport.so", "ccda0f02c5ae5a98cd82db2735a1542c6f8cdf9f", "/system/lib/libext2fs.so", "7acb864374db0686e071bc10491c2e686abb6204", "/system/lib/libnetutils.so", "1195e581d3f5697825393517fb13e6cabba10006", "/system/lib/libcameraservice.so", "304fc657ef4aedf22ccb67c0e845545e0e7328e4", "/system/lib/libril.so", "4fcc33792d688b9fb706237550d8b0e802fd1783", "/system/lib/drm/libfwdlockengine.so", "79d640bcd75669f3ae5a7aaebd01e82602931e84", "/system/lib/libsurfaceflinger.so", "d859cea7cc304880d2c439bf7733844edf52dd42", "/system/lib/libstagefright_amrnb_common.so", "9064b40eb4cd00b564f375abeb7f43ca87528189", "/system/lib/libcamera.so", "677f073129c013c442d2a0b5729ebcb06bf397ca", "/system/lib/libaudioflinger.so", "9468ee52a06fa50ecd32b5e1ac46407fac1e3c98", "/system/lib/invoke_mock_media_player.so", "a71b02dad479eb4d184bdf460c75801129b7cf09", "/system/lib/libGLESv2_dbg.so", "732a055d90fd1651576996a92d4b184013a95577", "/system/lib/libexpat.so", "4384371ddd360d88816b38055a43a630643c59c8", "/system/lib/libchromium_net.so", "c3893d95c171c6d44f322769b99ad95c4663afca", "/system/lib/libnetlink.so", "120c731f8f4c6c245996b9b7ffb24277531b2074");
set_perm_recursive(0, 0, 0755, 0644, "/system");
set_perm_recursive(0, 2000, 0755, 0755, "/system/bin");
set_perm(0, 3003, 02750, "/system/bin/netcfg");
set_perm(0, 3004, 02755, "/system/bin/ping");
set_perm(0, 2000, 06750, "/system/bin/run-as");
set_perm(1001, 1005, 0444, "/system/etc/AudioPara4.csv");
set_perm_recursive(1002, 1002, 0755, 0440, "/system/etc/bluetooth");
set_perm(0, 0, 0755, "/system/etc/bluetooth");
set_perm(1000, 1000, 0640, "/system/etc/bluetooth/auto_pairing.conf");
set_perm(3002, 3002, 0444, "/system/etc/bluetooth/blacklist.conf");
set_perm(1002, 1002, 0440, "/system/etc/dbus.conf");
set_perm(1014, 2000, 0550, "/system/etc/dhcpcd/dhcpcd-run-hooks");
set_perm(0, 2000, 0550, "/system/etc/init.goldfish.sh");
set_perm(0, 0, 0544, "/system/etc/install-recovery.sh");
set_perm_recursive(0, 0, 0755, 0555, "/system/etc/ppp");
set_perm_recursive(0, 2000, 0755, 0644, "/system/vendor");
set_perm_recursive(0, 0, 0755, 0644, "/system/vendor/firmware");
set_perm(0, 2000, 0755, "/system/vendor/firmware");
set_perm_recursive(0, 2000, 0755, 0755, "/system/xbin");
set_perm(0, 0, 06755, "/system/xbin/librank");
set_perm(0, 0, 06755, "/system/xbin/procmem");
set_perm(0, 0, 06755, "/system/xbin/procrank");
set_perm(0, 0, 06755, "/system/xbin/su");
set_perm(0, 0, 06755, "/system/xbin/tcpdump");
show_progress(0.200000, 0);
show_progress(0.200000, 10);
write_raw_image(package_extract_file("boot.img"), "boot");
show_progress(0.100000, 0);
unmount("/system");
